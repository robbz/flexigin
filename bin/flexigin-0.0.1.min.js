/*!
 * flexigin - v0.0.1
 * (c) Roberto Bez (http://www.devangelist.de)
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 * 2013-03-13 
 */
(function(n){var e=function(n,t,r){"function"==typeof t&&(r=t,t={}),t=t||{},n=e.resolve(n),e.load(n,t,r)};e.set=function(n,t){e[n]=t},e.get=function(n){return e[n]},n.fx=e,"undefined"!=typeof define&&define(function(){return e})})(window),function(n,e){var t=function(t,r,u){r=r||{};var i=n.query();return e.each(t,function(n,e){i.add(e,r)}),i.isEmpty()?(u(),void 0):(i.run(r,u),void 0)};n.loaded=[];var r=function(){var t=[],r=this,i=u();return{add:function(e,u){-1===n.loaded.indexOf(e)&&(t.push(i[e.type](e.url,u)),r.loaded.push(e))},run:function(n,r){var u=function(e){if("undefined"!=typeof ko&&n.viewModel!==void 0){var t=n.viewModel();t.hasOwnProperty("init")&&t.init(),ko.applyBindings(t,n.container)}r(null,e)};e.when.apply(e,t).done(u).fail(r)},length:function(){return t.length},isEmpty:function(){return 0===t.length}}},u=function(){return{html:function(n,t){var r=function(n){e(t.container||"body").append(n)};return e.get(n).done(r)},css:function(n){var t=function(n){e("head").append("<style>"+n+"</style>")};return e.get(n).done(t)},js:function(n){return e.getScript(n)}}};n.load=t,n.query=r}(fx,jQuery),function(n,e){var t=function(){return{build:function(e,t){return e=u(e),(n.get("route")||"/{component}/{type}/").replace("{component}",e).replace("{type}",t)},getExtension:function(n){var e=n.split("/");return e[e.length-1]}}},r=function(t){var r=n.url(),u=["js","css","html"],i=function(n,e){return{url:r.build(n,e),type:e}},o=[];return"string"==typeof t&&(t=[t]),e.each(t,function(n,t){if("string"==typeof t){var f=r.getExtension(t);-1===u.indexOf(f)?e.each(u,function(n,e){o.push(i(t,e))}):(t=t.substr(0,t.lastIndexOf("/")),o.push(i(t,f)))}else o.push(t)}),o},u=function(n){return n.replace(/^\/+|\/+$/g,"")};n.resolve=r,n.url=t}(fx,jQuery);